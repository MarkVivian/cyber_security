
                     Basic useful commands 
                =============================
i. Get a basic shell on the device.
    EG.
        adb shell
        # drops you into device shell (like ssh to the phone)

            - adb <something> runs on your host.
            - inside the shell you do not prefix commands with adb.
                EG.
                    # From host (not in shell)
                    adb pull /sdcard/DCIM/ ~/DCIM_backup    # host pulls files from device
                    adb shell pm uninstall --user 0 com.pkg.name   # runs pm from host (one-liner)

                    # inside shell.
                    adb shell
                    # now at device prompt
                    ls /sdcard/DCIM/    # list files on device
                    pm uninstall --user 0 com.pkg.name   # run pm locally on device shell
                    exit


ii. Run a single shell command without dropping into interactive shell.
    EG.
        adb shell <command>
        # example
        adb shell getprop ro.product.model
        # returns the device model string (e.g., "TECNO Spark 6")

            - getprop is the key to pull device properties (model, manufacturer, Android Version).


iii. pull data (copy from device to PC)
    EG.
        adb pull <remote-path> <local-path>
        # example - pull DCIM (photos)
        adb pull /sdcard/DCIM/ ~/phone_backup/DCIM

            - Ensure to use the / instead of \ since android runs on linux.


iv. Push files (copy from PC to device)
    EG.
        adb push <local-path> <remote-path>
        # example - push APK to device /sdcard
        adb push test.apk /sdcard/test.apk


v. List installed packages (finding candidate malware/bloat)
    EG.
        adb shell pm list packages
        # find packages containing "phoenix"
        adb shell
        pm list packages | grep phoenix
        # or 
        # host PowerShell
        adb shell pm list packages | Select-String 'phoenix'


            - To list packages with APK paths.
                EG.
                    adb shell pm list packages -f
                    # prints lines like:
                    # package:/data/app/com.phoenix.browser-1/base.apk=com.phoenix.browser

vi. Installing packages onto device.
    EG.
        adb install /path/to/app.apk        # installs to /data/app (user app)
        # to upgrade while keeping data:
        adb install -r app.apk
        # to install on a specific user:
        adb install --user 0 app.apk


vii. Uninstall (user) package (no-root)
    - User apps (installed by the user) live in /data/app/ and can usually be uninstalled by non-root adb with:
        EG.
            # syntax: pm uninstall [--user <USER_ID>] <PACKAGE>
            adb shell pm uninstall com.phoenix.browser.
            # to uninstall for the current user only.
            adb shell pm uninstall --user 0 com.phoenix.browser

                - You must use the package identifier (e.g. com.phoenix.browser) with pm commands.
                - Use pm list packages to get the package ID.

    - Preinstalled/System apps are placed on the system partition (/system/priv-app or /system/app) in the ROM image.
    - they usually don't show an uninstall button.
    - You cannot remove the APK from system partition without root.
    - However you can remove them for the current user.
        EG.
            adb shell pm uninstall --user 0 com.manufacturer.bloat

                - This hides the app for user 0 ( the primary user) but does not delete the APK from the system partition.
                - Its non-distructive and reversable (reappear on factory reset).
                - To permanently remove, you must remount /system and delete the apk which requires rooting the device.


viii. Disabling an application.
    - This disables the package for user 0 (stops it running, prevents launcher entry).
    - Notifications and background services should stop.
    - Useful to silence bloat without deleting APKs.
        EG.
            adb shell pm disable-user --user 0 com.phoenix.browser

                - If the app reanables itself it could be mitigated using:
                    EG.
                        adb shell am force-stop com.phoenix.browser         # immediately stops processes.
                                # and 
                        adb shell pm clear com.phoenix.browser              # to remove data (may remove ad triggers).

                            - if it's device-admin, you must first remove its admin rights.


ix. Take a screenshot(headless)
    EG.
        adb shell 
        screencap /sdcard/test.png 
            # then exit 
        adb pull /sdcard/test.png 
            
            
        adb exec-out screencap -p > screen.png

            - the exec-out only runs on the host (pc).
            - the -p tells screncap to output PNG (PNG format) to stdout or file.
            - Without -p it outputs raw framebuffer data (platform-dependant). use -p for PNG.


x. Simulate input ( useful if screen touch broken but display works, or to automate unlocking)
    EG.
        # press power
        adb shell input keyevent 26
        # swipe (x1 y1 x2 y2 duration_ms)
        adb shell input swipe 300 1000 300 200 200
        # type text (spaces escaped or use quotes)
        adb shell input text "1234"


xi. Boot to recovery/bootloader
    EG.
        adb reboot recovery
        adb reboot bootloader   # then use fastboot commands


xii. Show device w/ extra info (useful if multiple devices)
    EG.
        adb devices -l
        # shows SERIAL device product:MODEL model:MODEL device:DEVICE


xiii. If multiple devices attached, target a specific one:
    EG.
        adb -s <SERIAL/TCPIP> shell getprop ro.product.model


xiv. Read or View file contents(quick)
    EG.
        # print small text file to terminal
        adb shell cat /sdcard/Notes/todo.txt

        # or, to save to host(pc being used):
        adb exec-out cat /sdcard/Notes/todo.txt > todo.txt

            - If file in app private data (e.g., /data/data/com.app/) you would need root or the app to be debuggable and use run-as:
                EG.
                    # if app is debuggable or run-as works
                    adb shell
                    run-as com.example.app
                    cd /data/data/com.example.app/files
                    cat somefile.db
                    # Or from host:
                    adb shell run-as com.example.app cat /data/data/com.example.app/databases/dbname > localdb.sqlite

                        - run-as works only if the app was built as debuggable or if the device allows it.

            - /sdcard (aka /storage/emulated/0) is user-accessible storage meaning ADB shell user and apps typically have permission to read and write.
            - Mnay other paths (e.g. /data/data/<package>) are protected and require root or run-as of the app.


xv. listing Users 
    EG.
        adb shell pm list users
        # output example:
        # Users:
        #     UserInfo{0:Owner:13}  (running)

            - Most phones have a primary user 0. 
            - So --user 0 is usually the right choice.
