                        OWNERSHIP IN LINUX
                    ===========================
- In Linux, every file and directory has an owner and a group associated with it. 
- The owner is typically the user who created the file, and the group is usually a primary group of that user.
    >> User(Owner) : The person who owns the file
    >> Group : A set of users. All users in the group have certain permissions to the file.


- You can view the ownership and permissions of a file using:
    EG.
        ls -l filename

            - this will output the following:
                EG.
                    -rwxr-xr-- 1 user group 4096 Jun 13 12:34 filename

                        `-rwxr-xr--` : indicates the permissions.
                        `user` : is the owner.
                        `group` : is the group.


                SPECIAL PERMISSIONS (Setuid, Setgid, Sticky bit)
            ======================================================
the `s` bit in permissions stands for special permissions:

    * Setuid (`s` for user)
        - When you apply SetUID to an executable file, anyone who runs that file "becomes" the owner of the file for as long as the program is running.
        - EXAMPLE
            1. File with `setuid` bit set.
                - owner: `john`
                - Permissions : `rwsr-xr-x`
                - User: `mark` (you are in the group that has execution permission)

                    * if mark executes this file, it runs with `john`'s permissions.

                    - to add setuid to a file:        
                        EG.
                            chmod u+s filename
                                OR 
                            chmod 4755 filename (the 4 represent setUID )

                            - if you want to set the same permission for all files in a directory:
                                EG.
                                    chmod -R 777 ./directory/name


    * Setgid (`s` for group)
        - Similar to SetUID, the person running the file temporarily gains the permissions of the file's group.
        - When set on a directory, it means that files created in the directory inherit the group ownership from the directory.
            > Normally when you create a file, it belongs to your primary group. 
            > If you have a shared folder for a "Marketing" team, you want every new file created there to belong to the "marketing" group automatically.
                EG.
                    # 1. Create a shared directory
                    mkdir /home/marketing_shares

                    # 2. Change the group to 'marketing'
                    chgrp marketing /home/marketing_shares

                    # 3. Apply SetGID
                    chmod g+s /home/marketing_shares

                        > Now, any file created inside /home/marketing_shares will automatically belong to the marketing group, regardless of who creates it.

        - To set setGID to a file.
            EG.
                chmod g+s directory_name 
                    OR 
                chmod 2775 directory_name (the 2 represents setGID)

        - permission : `drwxr-sr-x`


    * Sticky bit (`t`)
        - When set on a directory, it means that only the owner of a file can delete or rename the file within that directory.
        - In a directory with 777 permissions (read/write/execute for everyone), anyone can delete any file.
        - The Sticky Bit changes this rule: only the file's owner (or root) can delete or rename a file within that directory.
        - to add sticky bit:
            EG.
                chmod o+t directory.
                    OR 
                chmod 1777 directory_name (the 1 represents the sticky bit)

        - permission: drwxrwxrwt 15 root root 4096 Feb 06 2026 /tmp

NB: If you see a Capital S or T (e.g., rwSr-xr-x), it means the special bit is set, but the underlying execution bit(x) is not set.
    This usually means the permissions won't actually do anything until you add +x.
    

                    USER MANAGEMENT.
                ======================
- To create a new user.
    EG.
        sudo adduser username --> sudo adduser steve.


- To change the password of a user or give password to a user.
    EG.
        sudo passwd username --> sudo passwd steve 

        - All this is possible because the sudo allows us to be in root.
        - the root acts as admin thus allowing us to change all this.
        - if you don't want a user to have this access then you can remove sudo group from the username.
            EG.
                sudo gpasswd -d steve sudo.


- To remove a user.
    EG.
        sudo deluser username --> sudo deluser steve 


- To remove the home directory so that its hard to find.
    EG.
        sudo deluser --remove-home steve 

            - you can also create a user without the home directory.
                EG.
                    sudo useradd -M hacker


- Checking all the users on a machine.
    EG.
        cut -d: -f1 /etc/passwd    


            Manual Removal of a User
        -----------------------------------
1. Removing a User from /etc/passwd
    - Impact: If you remove a user entry from /etc/passwd, the system no longer recognizes that user. They cannot log in, and their home directory and files might become inaccessible (if not removed). However, if the corresponding entry still exists in /etc/shadow, some parts of the system might still retain certain information about the user.
        EG.
            sudo sed -i '/markv/d' /etc/passwd

    - What Happens: The user markv will no longer have any valid login information, and they will be unable to access the system. If their entry is removed from /etc/passwd, but still exists in /etc/shadow, you might encounter inconsistencies or errors related to authentication.

2. Removing a User from /etc/shadow
    - Impact: Removing a user from /etc/shadow removes their password and related authentication information. If the entry is removed while the user entry still exists in /etc/passwd, the user will have no valid password and will not be able to authenticate using the password.
        EG.
            sudo sed -i '/markv/d' /etc/shadow

    - What Happens: The user markv will have no valid password and cannot log in using a password. If their entry is removed from /etc/shadow but still exists in /etc/passwd, their account will appear to exist, but they cannot access it because thereâ€™s no valid authentication method.